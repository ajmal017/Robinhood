# Robinhood  
Python implementation of Robinhood API.  
Updated June 27 2019.  
There are three classes inside, the structure is as follows:  
``` Robinhood ``` has ``` Client ``` uses ``` Url ```  
  
Upon construction a Client is created with a session.  
  
- [Login/Logout](#Login/Logout)
  * [Login](#Login)
  * [Logout](#Logout)
- [Account Info](#Account-Info)
- [Positions](#Positions)
- [Quote](#Quote)
  * [Symbols](#Symbols)
    + [Fundamental Data](#Fundamental-Data)
  * [Options](#Options)
- [Trade](#Trade)
  * [Buy](#Buy)
    + [Market Buy](#Market-Buy)
    + [Limit Buy](#Limit-Buy)
  * [Sell](#Sell)
    + [Market Sell](#Market-Sell)
    + [Limit Sell](#Limit-Sell)

## Login/Logout
### Login
``` Robinhood ``` implementation: ``` login() ```  
``` Client ``` implementation: ``` login(username, password) ```  
Robinhood uses a token system. Each request to an account's private information needs to include the token in the header.  
The token is represented in the header as ``` Authorization: Bearer [TOKEN] ```  
To obtain the token make a ``` POST ``` request to ``` https://api.robinhood.com/oauth2/token/ ``` with the following content:  
```json
{
    "grant_type":"password",
    "scope":"internal",
    "client_id":"c82SH0WZOsabOXGP2sxqcj34FxkvfnWRZBKlBjFS",
    "expires_in":86400,
    "device_token":"device_token",
    "username":"username",
    "password":"password"
}
```  
The ``` device_token ``` is generated by the Robinhood javascript or in the smartphone app.  Details of which were not clear.  
  
Robinhood will reply with the following content:
```json
{
    "access_token": "[LONG TOKEN]",
    "expires_in": 86400,
    "token_type": "Bearer",
    "scope": "internal",
    "refresh_token": "[short token]",
    "mfa_code": null,
    "backup_code": null
}
```
## Logout
``` Robinhood ``` implementation: ``` logout() ```  
``` Client ``` implementation: ``` logout() ```  
Logging out is straightforward. In the header include the ``` Authorization ``` token, and the body will include the refresh token.  
Make a ``` POST ``` request to ``` https://api.robinhood.com/oauth2/revoke_token/ ``` with the following content:
```json
{
    "client_id":"c82SH0WZOsabOXGP2sxqcj34FxkvfnWRZBKlBjFS",
    "token":"refresh_token"
}
```
At this point the server will return a 200 error code with no content.
## Account Info
``` Client ``` implementation: ``` account_info() ```  
Requires user login (Authorization token). The request is made to Robinhood and returns general account info.  
A ``` GET ``` request is made to ``` https://api.robinhood.com/accounts/ ```. The server will respond with the following:  
```json
{
    "previous": "",
    "results": [
        {
            "rhs_account_number": 0,
            "deactivated": "false",
            "updated_at": "2019-04-11T17:56:00.919656Z",
            "margin_balances": {
                "updated_at": "2019-06-27T13:04:59.931513Z",
                "gold_equity_requirement": "2000.0000",
                "pending_deposit": "0.0000",
                "cash_held_for_restrictions":"0.0000",
                "outstanding_interest": "0.0000",
                "cash_pending_from_options_events": "0.0000",
                "cash_held_for_options_collateral": "0.0000",
                "uncleared_nummus_deposits": "0.0000",
                "overnight_ratio": "0.50",
                "day_trade_buying_power": "1.0000",
                "cash_available_for_withdrawal": "0.5000",
                "settled_amount_borrowed": "0.0000",
                "sma": "0",
                "cash_held_for_nummus_restrictions": "0.0000",
                "marked_pattern_day_trader_date": "2019-06-24",
                "unallocated_margin_cash": "100.0000",
                "day_trades_protection": "false",
                "start_of_day_dtbp": "50.0000",
                "overnight_buying_power_held_for_orders": "0.0000",
                "day_trade_ratio": "0.25",
                "cash_held_for_orders": "0.0000",
                "unsettled_debit": "50.0000",
                "day_trade_buying_power_held_for_orders": "0.0000",
                "cash_held_for_dividends": "0.0000",
                "cash": "50.0000",
                "start_of_day_overnight_buying_power": "100.0000", 
                "margin_limit": "1000.0000",
                "overnight_buying_power": "50.0000",
                "uncleared_deposits": "0.0000",
                "unsettled_funds": "0.0000",
                "created_at": "2016-12-06T13:43:35.012127Z"
            },
            "portfolio": "https://api.robinhood.com/accounts/ACCT#/portfolio/",
            "cash_balances": "",
            "active_subscription_id": "id#",
            "can_downgrade_to_cash": "https://api.robinhood.com/accounts/ACCT#/can_downgrade_to_cash/",
            "withdrawal_halted": "false",
            "cash_available_for_withdrawal": "1.0000",
            "state": "active",
            "type": "margin",
            "sma": "0",
            "sweep_enabled": "true",
            "deposit_halted": "false",
            "buying_power": "100.0000",
            "user": "https://api.robinhood.com/user/",
            "max_ach_early_access_amount": "25000.00",
            "option_level": "option_level_3",
            "instant_eligibility": {
                "reinstatement_date": "",
                "state": "ok",
                "updated_at": "",
                "reason": "",
                "additional_deposit_needed": "0.0000",
                "reversal": ""
            },
            "cash_held_for_orders": "0.0000",
            "locked": "",
            "only_position_closing_trades": "false",
            "url": "https://api.robinhood.com/accounts/ACCT#/",
            "positions": "https://api.robinhood.com/accounts/ACCT#/positions/",
            "created_at": "2017-09-20T22:56:25.494268Z",
            "cash": "50.0000",
            "sma_held_for_orders": "0",
            "unsettled_debit": "50.0000",
            "account_number": "ACCT#",
            "is_pinnacle_account": "true",
            "uncleared_deposits": "0.0000",
            "unsettled_funds": "0.0000"
        }
    ],
    "next": ""
}
```
### Positions
## Quote
### Symbols
#### Fundamental Data
### Options
## Trade
### Buy
#### Market Buy
#### Limit Buy
``` Robinhood ``` implementation: ``` limit_buy(symbol, price, quantity, extened=False, cancel=None) ```  
``` Client ``` implementation: ``` limit_buy(symbol, price, quantity, extened=False, cancel=None) ```  
Limit buy a stock at a set price with specified quantity.  
There is an option to buy during pre/after-market as well as set cancellable to 'gfd' (good for day) or 'gtc' (good til cancelled).  
Make a ``` POST ``` request to ``` https://api.robinhood.com/orders/ ``` with the following content:
```json
{
    "time_in_force":"gfd",
    "price":"10.00",
    "quantity":"1",
    "side":"buy",
    "trigger":"immediate",
    "type":"limit",
    "account":"https://api.robinhood.com/accounts/ACCT#/",
    "instrument":"https://api.robinhood.com/instruments/ad059c69-0c1c-4c6b-8322-f53f1bbd69d4/",
    "symbol":"AAPL",
    "extended_hours":"false"
}
```

The server will respond with the following order information:
```json
{
    "updated_at":"2019-06-27T18:59:34.203980Z",
    "ref_id":"",
    "time_in_force":"gfd",
    "last_trail_price":"","fees":"0.00",
    "cancel":"https://api.robinhood.com/orders/ORDER#/cancel/",
    "response_category":"",
    "id":"5eac5f8d-1276-440e-86ff-63de35c4bcbf",
    "cumulative_quantity":"0.00000",
    "stop_price":"",
    "reject_reason":"",
    "instrument":"https://api.robinhood.com/instruments/450dfc6d-5510-4d40-abfb-f633b7d9be3e/",
    "state":"unconfirmed",
    "trigger":"immediate",
    "override_dtbp_checks":false,
    "last_trail_price_updated_at":"",
    "type":"limit",
    "last_transaction_at":"2019-06-27T18:59:34.196783Z",
    "price":"10.00000000",
    "executions":[],
    "extended_hours":false,
    "account":"https://api.robinhood.com/accounts/ACCT#/",
    "stop_triggered_at":"",
    "url":"https://api.robinhood.com/orders/ORDER#/",
    "created_at":"2019-06-27T18:56:34.191793Z",
    "side":"buy",
    "override_day_trade_checks":false,
    "position":"https://api.robinhood.com/positions/ACCT#/POSITION#/",
    "average_price":"",
    "quantity":"1.00000"
}
```
### Sell
#### Market Sell
#### Limit Sell
